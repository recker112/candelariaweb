(this.webpackJsonpGedure=this.webpackJsonpGedure||[]).push([[14],{293:function(e,a,t){"use strict";var n=t(0),r=t.n(n),i=t(48),c=t(410),o=t(207),l=t(91),s=Object(l.a)((function(e){return{progress:{position:"absolute"},progressLabel:{marginTop:5}}}));a.a=function(e){var a=e.loading,t=e.backDrop,n=void 0!==t&&t,l=e.children,u=function(e){var a=e.color,t=void 0===a?"primary":a,n=e.progressLabel,o=e.progressLoading,l=e.progress,u=s();return o&&l<=99?r.a.createElement(i.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(i.a,{container:!0,justify:"center",alignItems:"center",item:!0,xs:12},r.a.createElement(c.a,{color:t,variant:"static",value:l})),r.a.createElement("span",{className:u.progress},l,"%"),n&&r.a.createElement(i.a,{item:!0,xs:!0},r.a.createElement("span",{className:u.progressLabel},n))):r.a.createElement(c.a,{color:t})};return a&&!n?r.a.createElement(u,e):a&&n?r.a.createElement(o.a,{open:!0,style:{zIndex:200}},r.a.createElement(u,e)):l}},341:function(e,a,t){"use strict";var n=t(0),r=t.n(n),i=t(12),c=t(962),o=t(45),l=t(323),s=t.n(l),u=t(91),m=Object(u.a)((function(e){return{breadCrumbs:{marginBottom:e.spacing(2)}}}));a.a=function(){var e=m(),a=Object(i.h)().pathname.split("/");return a.splice(0,1),r.a.createElement(c.a,{separator:r.a.createElement(s.a,{fontSize:"small"}),"aria-label":"breadcrumb",className:e.breadCrumbs},a.map((function(e,t){var n=t+1===a.length;if("panel"===e)return r.a.createElement(o.a,{key:t,color:n?"textPrimary":"initial"},"Gedure Panel");var i=e[0].toUpperCase()+e.slice(1);return r.a.createElement(o.a,{key:t,color:n?"textPrimary":"initial"},i)})))}},421:function(e,a,t){"use strict";t.d(a,"a",(function(){return I})),t.d(a,"b",(function(){return _}));var n=t(0),r=t.n(n),i=t(538),c=t.n(i),o=t(547),l=t.n(o),s=t(539),u=t.n(s),m=t(546),d=t.n(m),f=t(541),p=t.n(f),g=t(369),b=t.n(g),E=t(540),v=t.n(E),j=t(422),O=t.n(j),h=t(543),x=t.n(h),w=t(544),y=t.n(w),C=t(545),R=t.n(C),T=t(548),N=t.n(T),k=t(542),P=t.n(k),D=t(368),S=t.n(D),L=t(549),A=t.n(L),I={Add:Object(n.forwardRef)((function(e,a){return r.a.createElement(c.a,Object.assign({},e,{ref:a}))})),Check:Object(n.forwardRef)((function(e,a){return r.a.createElement(u.a,Object.assign({},e,{ref:a}))})),Clear:Object(n.forwardRef)((function(e,a){return r.a.createElement(b.a,Object.assign({},e,{ref:a}))})),Delete:Object(n.forwardRef)((function(e,a){return r.a.createElement(v.a,Object.assign({},e,{ref:a}))})),DetailPanel:Object(n.forwardRef)((function(e,a){return r.a.createElement(p.a,Object.assign({},e,{ref:a}))})),Edit:Object(n.forwardRef)((function(e,a){return r.a.createElement(O.a,Object.assign({},e,{ref:a}))})),Export:Object(n.forwardRef)((function(e,a){return r.a.createElement(P.a,Object.assign({},e,{ref:a}))})),Filter:Object(n.forwardRef)((function(e,a){return r.a.createElement(x.a,Object.assign({},e,{ref:a}))})),FirstPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(y.a,Object.assign({},e,{ref:a}))})),LastPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(R.a,Object.assign({},e,{ref:a}))})),NextPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(p.a,Object.assign({},e,{ref:a}))})),PreviousPage:Object(n.forwardRef)((function(e,a){return r.a.createElement(d.a,Object.assign({},e,{ref:a}))})),ResetSearch:Object(n.forwardRef)((function(e,a){return r.a.createElement(b.a,Object.assign({},e,{ref:a}))})),Search:Object(n.forwardRef)((function(e,a){return r.a.createElement(S.a,Object.assign({},e,{ref:a}))})),SortArrow:Object(n.forwardRef)((function(e,a){return r.a.createElement(l.a,Object.assign({},e,{ref:a}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,a){return r.a.createElement(N.a,Object.assign({},e,{ref:a}))})),ViewColumn:Object(n.forwardRef)((function(e,a){return r.a.createElement(A.a,Object.assign({},e,{ref:a}))}))},_={body:{emptyDataSourceMessage:"No hay registros"},header:{actions:"Opciones"},toolbar:{searchPlaceholder:"Buscar",searchTooltip:"Buscar"},pagination:{labelDisplayedRows:"{from}-{to} de {count}",firstTooltip:"Primera p\xe1gina",previousTooltip:"P\xe1gina anterior",nextTooltip:"Pr\xf3xima p\xe1gina",lastTooltip:"\xdaltima p\xe1gina",labelRowsSelect:"filas"}}},961:function(e,a,t){"use strict";t.r(a);var n=t(49),r=t.n(n),i=t(63),c=t(38),o=t(0),l=t.n(o),s=t(12),u=t(208),m=t(48),d=t(238),f=t(91),p=t(551),g=t.n(p),b=t(339),E=t.n(b),v=t(422),j=t.n(v),O=t(550),h=t.n(O),x=t(415),w=t.n(x),y=t(102),C=t(341),R=t(421),T=t(445),N=t(64),k=t(971),P=t(258),D=t(241),S=t(972),L=t(45),A=t(507),I=t(166),_=t(414),F=t(977),z=t(960),B=t(312),M=t(77),G=t(122),q=l.a.forwardRef((function(e,a){return l.a.createElement(G.a,Object.assign({direction:"up",ref:a},e))})),W=t(293),U=t(15),V=function(e,a,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:"UPDATE_DIALOG_DATA",payload:{dialog:e,open:a,loading:t,data:n,status:r}}},J=Object(f.a)((function(e){return{appBar:{alignItems:"flex-end",position:"relative"},paddingTopDialog:{paddingTop:e.spacing(3)},button:{marginRight:e.spacing(1)},showCaracteres:{marginTop:e.spacing(1)}}}));var Q=function(e){var a,t,n=e.tableRef,c=void 0===n?null:n,s=Object(o.useState)([]),f=Object(N.a)(s,2),p=f[0],b=f[1],E=Object(o.useState)(0),v=Object(N.a)(E,2),j=v[0],O=v[1],h=Object(U.d)((function(e){return{open:e.dialogs.crearNoticia.open,loading:e.dialogs.crearNoticia.loading,data:e.dialogs.crearNoticia.data}})),x=h.open,w=h.loading,C=h.data,R=Object(U.c)(),G=J(),Q=Object(y.a)().fetchData,H=Object(B.a)({mode:"onTouched"}),K=H.register,X=H.handleSubmit,Y=H.errors,Z=H.watch,$=Object(M.b)().enqueueSnackbar,ee=Object(o.useCallback)((function(e){var a=Math.round(100*e.loaded/e.total);O(a)}),[]),ae=function(){var e=Object(i.a)(r.a.mark((function e(a){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(V("crearNoticia",!0,!0,{})),a.imgs=p,(t=new FormData).append("title",a.title),t.append("content",a.content.replace(/\r?\n/g,"</br>")),t.append("only_users",a.only_users),a.imgs.forEach((function(e){t.append("imgs[]",e.file)})),n={url:"v1/posts",type:"post",data:t,otherData:{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:ee}},e.next=10,Q(n);case 10:e.sent&&(c.current&&c.current.onQueryChange(),b([]),O(0)),R(V("crearNoticia",!0,!1));case 13:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return l.a.createElement(k.a,{open:x,TransitionComponent:q,fullScreen:!0},l.a.createElement(P.a,{className:G.appBar},l.a.createElement(D.a,null,l.a.createElement(d.a,{disabled:w,onClick:function(){b([]),R(V("crearNoticia",!1,!1,{}))},className:G.button},"Cerrar"),l.a.createElement(W.a,{loading:w,progressLoading:!0,progress:j,color:"inherit"},l.a.createElement("label",{htmlFor:"submit-createNotice"},l.a.createElement(d.a,{variant:"contained",component:"span",endIcon:l.a.createElement(g.a,null)},"Crear"))))),l.a.createElement(S.a,{className:"container--padding"},l.a.createElement(m.a,{container:!0,spacing:2},l.a.createElement(m.a,{item:!0,xs:12},l.a.createElement(L.a,{variant:"h6",className:"text__bold--big"},"Crear una nueva noticia")),l.a.createElement(m.a,{item:!0,xs:12},l.a.createElement(u.a,{maxWidth:"md"},l.a.createElement("form",{onSubmit:X(ae),autoComplete:"off"},l.a.createElement(m.a,{container:!0,spacing:2},l.a.createElement(m.a,{container:!0,justify:"center",item:!0,xs:12},l.a.createElement(A.a,{name:"title",label:"T\xedtulo",defaultValue:C.title||"",variant:"outlined",inputRef:K({required:{value:!0,message:"Campo requerido"},minLength:{value:6,message:"T\xedtulo muy corto"},maxLength:{value:100,message:"T\xedtulo muy grande"}}),error:Boolean(Y.title),helperText:(null===Y||void 0===Y||null===(a=Y.title)||void 0===a?void 0:a.message)?Y.title.message:"Ingrese un t\xedtulo para su publicaci\xf3n",disabled:w,size:"small",fullWidth:!0,style:{maxWidth:400},autoFocus:!0})),l.a.createElement(m.a,{container:!0,justify:"center",item:!0,xs:12},l.a.createElement(A.a,{name:"content",label:"Contenido",defaultValue:C.content||"",variant:"outlined",inputRef:K({required:{value:!0,message:"Campo requerido"},minLength:{value:20,message:"Contenido muy corto"},maxLength:{value:5e4,message:"Contenido demaciado grande"}}),error:Boolean(Y.content),helperText:(null===Y||void 0===Y||null===(t=Y.content)||void 0===t?void 0:t.message)?Y.content.message:"Ingrese el contenido de la publicaci\xf3n",disabled:w,size:"small",multiline:!0,rows:6,rowsMax:16,fullWidth:!0}),l.a.createElement(I.a,{color:Boolean(null===Y||void 0===Y?void 0:Y.content)?"#f44336":"text.primary"},Z("content",[]).length,"/",5e4," Caracteres")),l.a.createElement(m.a,{item:!0,xs:12},l.a.createElement(L.a,{variant:"h6",className:"text__bold--big text__opacity--semi"},"Opciones opcionales")),l.a.createElement(m.a,{item:!0,xs:12},l.a.createElement(_.a,{control:l.a.createElement(F.a,{name:"only_users",inputRef:K,color:"secondary"}),label:"Disponible solo para usuarios"})),l.a.createElement(m.a,{item:!0,xs:12},l.a.createElement(z.a,{fileObjects:p,acceptedFiles:["image/png","image/jpeg"],showPreviewsInDropzone:!1,showPreviews:!0,previewText:"Imagenes selecionadas:",onAdd:function(e){e=e.filter((function(e){return!p.find((function(a){return a.data===e.data}))})),b([].concat(Object(T.a)(p),Object(T.a)(e)))},onDelete:function(e){b(p.filter((function(a){return a!==e})))},filesLimit:10,showAlerts:!1,previewGridProps:{container:{spacing:2},item:{xs:!0}},maxFileSize:5e6,getFileLimitExceedMessage:function(e){return"Solo se permiten hasta ".concat(e," imagenes")},getFileAddedMessage:function(e){return"Archivo ".concat(e," agregado")},getFileRemovedMessage:function(e){return"Archivo ".concat(e," removido")},onAlert:function(e,a){$(e,{variant:a})},dropzoneText:"Arrastrar o cargar imagenes"}))),l.a.createElement("input",{type:"submit",style:{display:"none"},id:"submit-createNotice"})))))))},H=Object(f.a)((function(e){var a;return{containerMain:(a={flexGrow:1,marginBottom:e.spacing(6)},Object(c.a)(a,e.breakpoints.up("xs"),{marginTop:"48px"}),Object(c.a)(a,e.breakpoints.up("sm"),{marginTop:e.spacing(8)}),a)}}));a.default=function(){var e=Object(o.useRef)(null),a=Object(U.c)(),t=Object(y.a)().fetchData,n=Object(s.g)(),c=H(),f=Object(o.useCallback)(function(){var e=Object(i.a)(r.a.mark((function e(a){var n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:"v1/table-posts?page=".concat(a.page,"&per_page=").concat(a.pageSize,"&search=").concat(encodeURI(a.search)),type:"get",messageToFinish:!1},e.next=3,t(n);case 3:if(!(i=e.sent)){e.next=8;break}return e.abrupt("return",{data:i.data||[],page:i.page||0,totalCount:i.totalPosts||0});case 8:return e.abrupt("return",{data:[],page:0,totalCount:0});case 9:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[]);return l.a.createElement("main",{className:c.containerMain,ref:function(){document.title="La Candelaria - Noticias"}},l.a.createElement(u.a,{maxWidth:"md",className:"container--margin"},l.a.createElement(m.a,{container:!0,spacing:2},l.a.createElement(m.a,{item:!0,xs:12},l.a.createElement(C.a,null)),l.a.createElement(m.a,{container:!0,justify:"flex-end",item:!0,xs:12},l.a.createElement(d.a,{variant:"contained",color:"primary",startIcon:l.a.createElement(g.a,null),onClick:function(){a(V("crearNoticia",!0,!1))}},"A\xf1adir")),l.a.createElement(m.a,{item:!0,xs:12},l.a.createElement(w.a,{tableRef:e,title:"Lista de noticias",icons:R.a,columns:[{title:"T\xedtulo",field:"title"},{title:"Due\xf1o",field:"user",render:function(e){var a,t;return(null===(a=e.user)||void 0===a?void 0:a.privilegio)+(null===(t=e.user)||void 0===t?void 0:t.cedula)||"Ninguno"}},{title:"Fecha de publicaci\xf3n",field:"created_at"}],data:f,localization:R.b,actions:[{icon:function(){return l.a.createElement(E.a,null)},tooltip:"Ver",onClick:function(e,a){n.push("/noticias/"+a.slug)}},{icon:function(){return l.a.createElement(j.a,null)},tooltip:"Editar",onClick:function(e,a){}},{icon:function(){return l.a.createElement(h.a,null)},tooltip:"Eliminar",onClick:function(e,a){}}],options:{actionsColumnIndex:-1}}))),l.a.createElement(Q,{tableRef:e})))}}}]);
//# sourceMappingURL=14.06166cc1.chunk.js.map
{"version":3,"sources":["actions/updateForms.js","components/TableConfig.js","actions/updateDialogs.js","views/panel/registros/TableRegistros.js","components/AnimationDialog.js","views/panel/registros/ShowRegistro.js","views/panel/registros/PageRegistros.js"],"names":["updateForms","form","loading","data","status","type","payload","tableIcons","Add","forwardRef","props","ref","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","tableLocation","body","emptyDataSourceMessage","header","actions","toolbar","searchPlaceholder","searchTooltip","pagination","labelDisplayedRows","firstTooltip","previousTooltip","nextTooltip","lastTooltip","labelRowsSelect","updateDialogs","dialog","open","TableRegistros","tableRef","filters","useSelector","state","forms","registros","dispatch","useDispatch","fetchData","useFetch","onFetch","useCallback","query","a","page","encodeURI","prepare","url","pageSize","search","messageToFinish","res","result","totalCount","totalLogs","title","icons","columns","field","localization","icon","tooltip","onClick","event","rowData","JSON","parse","date","format","Date","date_format","hours","options","actionsColumnIndex","AnimationDialog","React","Slide","direction","ShowRegistros","dialogs","showRegistros","handleClose","Text","action","DialogContentText","name","username","nivel","time_block","Dialog","TransitionComponent","aria-labelledby","aria-describedby","onClose","DialogTitle","id","DialogContent","DialogActions","Button","useStyles","makeStyles","theme","containerMain","flexGrow","paddingBottom","spacing","breakpoints","up","marginTop","PageRegistros","document","useState","openFilter","setOpenFilter","countFilters","setCountFilters","useRef","classes","className","Container","Box","fontSize","mb","Grid","container","item","xs","Badge","badgeContent","Object","keys","length","color","startIcon","Collapse","in","timeout","unmountOnExit","my","sm","md","FormControl","style","width","InputLabel","Select","labelId","value","onChange","counts","target","current","onQueryChange","MenuItem"],"mappings":"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","file":"static/js/22.207b1bba.chunk.js","sourcesContent":["const updateForms = (form, loading, data = null, status = null) => {\n  return {\n    type: `UPDATE_FORM_DATA`,\n    payload: {form, loading, data, status}\n  }\n}\n\nexport default updateForms;","import React, { forwardRef } from 'react';\n\nimport AddBox from '@material-ui/icons/AddBox';\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\nimport Check from '@material-ui/icons/Check';\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport Clear from '@material-ui/icons/Clear';\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\nimport Edit from '@material-ui/icons/Edit';\nimport FilterList from '@material-ui/icons/FilterList';\nimport FirstPage from '@material-ui/icons/FirstPage';\nimport LastPage from '@material-ui/icons/LastPage';\nimport Remove from '@material-ui/icons/Remove';\nimport SaveAlt from '@material-ui/icons/SaveAlt';\nimport Search from '@material-ui/icons/Search';\nimport ViewColumn from '@material-ui/icons/ViewColumn';\n\nexport const tableIcons = {\n\tAdd: forwardRef((props, ref) => <AddBox {...props} ref={ref} />),\n\tCheck: forwardRef((props, ref) => <Check {...props} ref={ref} />),\n\tClear: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n\tDelete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref} />),\n\tDetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n\tEdit: forwardRef((props, ref) => <Edit {...props} ref={ref} />),\n\tExport: forwardRef((props, ref) => <SaveAlt {...props} ref={ref} />),\n\tFilter: forwardRef((props, ref) => <FilterList {...props} ref={ref} />),\n\tFirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref} />),\n\tLastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref} />),\n\tNextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref} />),\n\tPreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref} />),\n\tResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref} />),\n\tSearch: forwardRef((props, ref) => <Search {...props} ref={ref} />),\n\tSortArrow: forwardRef((props, ref) => <ArrowDownward {...props} ref={ref} />),\n\tThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref} />),\n\tViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref} />),\n};\n\nexport const tableLocation = {\n\tbody: {\n\t\temptyDataSourceMessage: 'No hay registros'\n\t},\n\theader: {\n\t\tactions: 'Opciones'\n\t},\n\ttoolbar: {\n\t\tsearchPlaceholder: 'Buscar',\n\t\tsearchTooltip: 'Buscar'\n\t},\n\tpagination: {\n\t\tlabelDisplayedRows: '{from}-{to} de {count}',\n\t\tfirstTooltip: 'Primera página',\n\t\tpreviousTooltip: 'Página anterior',\n\t\tnextTooltip: 'Próxima página',\n\t\tlastTooltip: 'Última página',\n\t\tlabelRowsSelect: 'filas'\n\t},\n}","const updateDialogs = (dialog, open, loading, data = null, status = null) => {\n  return {\n    type: `UPDATE_DIALOG_DATA`,\n    payload: {dialog, open, loading, data, status}\n  }\n}\n\nexport default updateDialogs;","import React, { useCallback } from 'react';\n\nimport MaterialTable from 'material-table';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\n\nimport useFetch from '../../../hooks/useFetch';\n\nimport { format } from 'date-fns';\n\n// Components\nimport { tableIcons, tableLocation } from '../../../components/TableConfig';\n\n// Redux\nimport { useSelector, useDispatch } from 'react-redux';\nimport updateForms from '../../../actions/updateForms';\nimport updateDialogs from '../../../actions/updateDialogs';\n\nexport default function TableRegistros({ tableRef, filters }) {\n\tconst { loading } = useSelector((state) => ({\n\t\tloading: state.forms.registros.loading,\n\t}));\n\tconst dispatch = useDispatch();\n\t\n\tconst { fetchData } = useFetch();\n\t\n\tconst onFetch = useCallback(async query => {\n\t\tif (loading) {\n\t\t\tquery.page = 0;\n\t\t}\n\t\t\n\t\tlet type = filters.type ? encodeURI(filters.type) : 'all';\n\t\t\n\t\tconst prepare = {\n\t\t\turl: `v1/logs?page=${query.page}&per_page=${query.pageSize}&type=${type}&search=${encodeURI(query.search)}`,\n\t\t\ttype: 'get',\n\t\t\tmessageToFinish: false,\n\t\t}\n\t\t\n\t\tconst res = await fetchData(prepare);\n\t\t\n\t\tdispatch(updateForms('registros', false));\n\t\t\n\t\tif (res) {\n\t\t\tconst result = {\n\t\t\t\tdata: res.data || [],\n\t\t\t\tpage: res.page || 0,\n\t\t\t\ttotalCount: res.totalLogs || 0\n\t\t\t}\n\t\t\treturn result;\n\t\t}else {\n\t\t\treturn {\n\t\t\t\tdata: [],\n\t\t\t\tpage: 0,\n\t\t\t\ttotalCount: 0\n\t\t\t}\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, [loading, filters]);\n\t\n\treturn (\n\t\t<MaterialTable\n\t\t\ttableRef={tableRef}\n\t\t\ttitle=\"Registros del sistema\" \n\t\t\ticons={tableIcons}\n\t\t\tcolumns={[\n\t\t\t\t{title: 'Usuario', field: 'username'},\n\t\t\t\t{title: 'Nombre', field: 'name'},\n\t\t\t\t{title: 'Acciรณn', field: 'action'},\n\t\t\t\t{title: 'Fecha', field: 'created_at'}\n\t\t\t]}\n\t\t\tdata={onFetch}\n\t\t\tlocalization={tableLocation}\n\t\t\tactions={[\n\t\t\t\t{\n\t\t\t\t\ticon: () => (<VisibilityIcon />),\n\t\t\t\t\ttooltip: 'Ver',\n\t\t\t\t\tonClick: (event, rowData) => {\n\t\t\t\t\t\trowData.payload = JSON.parse(rowData.payload);\n\t\t\t\t\t\trowData.date = format(new Date(rowData.date_format), 'dd/mm/yy');\n\t\t\t\t\t\trowData.hours = format(new Date(rowData.date_format), 'hh:mm a');\n\t\t\t\t\t\tdispatch(updateDialogs('showRegistros', true, false, rowData));\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t]}\n\t\t\toptions={{\n\t\t\t\tactionsColumnIndex: -1,\n\t\t\t}}\n\t\t/>\n\t);\n}","import React from 'react';\n\n//Material-UI\nimport { Slide } from '@material-ui/core';\n\nconst AnimationDialog = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nexport default AnimationDialog;","import React, { useCallback } from 'react';\n\nimport { \n\tDialog,\n\tDialogTitle,\n\tDialogActions,\n\tDialogContent,\n\tDialogContentText,\n\tButton,\n} from '@material-ui/core';\n\n// Components\nimport AnimationDialog from '../../../components/AnimationDialog';\n\n// Redux\nimport { useSelector, useDispatch } from 'react-redux';\nimport updateDialogs from '../../../actions/updateDialogs';\n\nexport default function ShowRegistros() {\n\tconst { open, data } = useSelector((state) => ({\n\t\topen: state.dialogs.showRegistros.open,\n\t\tdata: state.dialogs.showRegistros.data,\n\t}));\n\tconst dispatch = useDispatch();\n\n\tconst handleClose = () => {\n\t\tdispatch(updateDialogs('showRegistros', false, false));\n\t};\n\t\n\tconst Text = useCallback(() => {\n\t\tif (data.action === 'Inicio de sesión por relogin') {\n\t\t\treturn (\n\t\t\t\t<DialogContentText>\n\t\t\t\t\tEl día <strong>{data.date}</strong> a las <strong>{data.hours}</strong> el usuario <strong>{data.name}</strong> ({data.username}) entró al sistema mediante su llave de relogin.\n\t\t\t\t</DialogContentText>\n\t\t\t);\n\t\t}else if (data.action === 'Inicio de sesión') {\n\t\t\treturn (\n\t\t\t\t<DialogContentText>\n\t\t\t\t\tEl día <strong>{data.date}</strong> a las <strong>{data.hours}</strong> el usuario <strong>{data.name}</strong> ({data.username}) entró al sistema mediante el formulario del login.\n\t\t\t\t</DialogContentText>\n\t\t\t);\n\t\t}else if (data.action === 'Bloqueo de cuenta') {\n\t\t\treturn (\n\t\t\t\t<DialogContentText>\n\t\t\t\t\tEl día <strong>{data.date}</strong> a las <strong>{data.hours}</strong> el usuario <strong>{data.name}</strong> ({data.username}) bloqueó su cuenta, teniendo un bloqueo de <strong>nivel {data.payload.nivel}</strong> y esperando <strong>{data.payload.time_block} minutos</strong> para su desbloqueo.\n\t\t\t\t</DialogContentText>\n\t\t\t);\n\t\t}else if (data.action === 'Sesión cerrada') {\n\t\t\treturn (\n\t\t\t\t<DialogContentText>\n\t\t\t\t\tEl día <strong>{data.date}</strong> a las <strong>{data.hours}</strong> el usuario <strong>{data.name}</strong> ({data.username}) cerró su sesión dentro del sistema.\n\t\t\t\t</DialogContentText>\n\t\t\t);\n\t\t}else if (data.action === 'Sesiones cerradas') {\n\t\t\treturn (\n\t\t\t\t<DialogContentText>\n\t\t\t\t\tEl día <strong>{data.date}</strong> a las <strong>{data.hours}</strong> el usuario <strong>{data.name}</strong> ({data.username}) cerró todas sus sesiones dentro del sistema.\n\t\t\t\t</DialogContentText>\n\t\t\t);\n\t\t}else if (data.action === 'Correo de recuperación') {\n\t\t\treturn (\n\t\t\t\t<DialogContentText>\n\t\t\t\t\tEl día <strong>{data.date}</strong> a las <strong>{data.hours}</strong> el usuario <strong>{data.name}</strong> ({data.username}) solicitó un correo de recuperación para poder recuperar su contraseña.\n\t\t\t\t</DialogContentText>\n\t\t\t);\n\t\t}else if (data.action === 'Contraseña cambiada via correo') {\n\t\t\treturn (\n\t\t\t\t<DialogContentText>\n\t\t\t\t\tEl día <strong>{data.date}</strong> a las <strong>{data.hours}</strong> el usuario <strong>{data.name}</strong> ({data.username}) cambió su contraseña mediante la verificación del correo.\n\t\t\t\t</DialogContentText>\n\t\t\t);\n\t\t}\n\t},[data]);\n\t\n\treturn (\n\t\t<Dialog \n\t\t\topen={open}\n\t\t\tTransitionComponent={AnimationDialog}\n\t\t\taria-labelledby=\"show-registros\"\n\t\t\taria-describedby=\"show-registros-describedby\"\n\t\t\tonClose={handleClose}\n\t\t>\n\t\t\t<DialogTitle id=\"confirm-dialog-title\">Registro #{data.id}</DialogTitle>\n\t\t\t<DialogContent>\n\t\t\t\t<Text />\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t<Button\n\t\t\t\t\tonClick={handleClose}\n\t\t\t\t>\n\t\t\t\t\tEntendido\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n}","import React, { useState, useRef } from 'react';\n\nimport { \n\tGrid, \n\tContainer,\n\tBox,\n\tButton,\n\tCollapse,\n\tBadge,\n\tSelect,\n\tMenuItem,\n\tFormControl,\n\tInputLabel,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport FilterListIcon from '@material-ui/icons/FilterList';\n\n// Components\nimport TableRegistros from './TableRegistros';\nimport ShowRegistro from './ShowRegistro';\n\n// Redux\nimport { useDispatch } from 'react-redux';\nimport updateForms from '../../../actions/updateForms';\n\nconst useStyles = makeStyles((theme) => ({\n\tcontainerMain: {\n\t\tflexGrow: 1,\n\t\tpaddingBottom: theme.spacing(10),\n\t\t[theme.breakpoints.up('xs')]: {\n\t\t\tmarginTop: '80px',\n\t\t},\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\tmarginTop: theme.spacing(12),\n\t\t},\n\t},\n}));\n\nexport default function PageRegistros() {\n\tdocument.title = 'La Candelaria - Registros';\n\tconst [openFilter, setOpenFilter] = useState(false);\n\tconst [countFilters, setCountFilters] = useState({});\n\tconst tableRef = useRef(null);\n\t\n\tconst dispatch = useDispatch();\n\t\n\tconst classes = useStyles();\n\t\n\tconst handleChange = (event) => {\n\t\tconst counts = countFilters;\n\t\tif (event.target.value === 'all') {\n\t\t\tif (counts[event.target.name]) {\n\t\t\t\tdelete counts[event.target.name];\n\t\t\t\tsetCountFilters({...counts});\n\t\t\t\tdispatch(updateForms('registros', true));\n\t\t\t\ttableRef.current && tableRef.current.onQueryChange();\n\t\t\t}\n\t\t}else {\n\t\t\tif (event.target.value !== counts[event.target.name]) {\n\t\t\t\tsetCountFilters({...counts, [event.target.name]: event.target.value});\n\t\t\t\tdispatch(updateForms('registros', true));\n\t\t\t\ttableRef.current && tableRef.current.onQueryChange();\n\t\t\t}\n\t\t}\n  };\n\t\n\treturn (\n\t\t<main className={classes.containerMain}>\n\t\t\t<Container>\n\t\t\t\t<Box fontSize='h4.fontSize' mb={3} className='text__bold--big'>Registros</Box>\n\t\t\t\t\n\t\t\t\t<Grid container spacing={2}>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Badge badgeContent={Object.keys(countFilters).length} color=\"primary\">\n\t\t\t\t\t\t\t<Button \n\t\t\t\t\t\t\t\tonClick={()=> setOpenFilter(!openFilter)} \n\t\t\t\t\t\t\t\tstartIcon={<FilterListIcon />}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tFiltrador\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<Collapse in={openFilter} timeout=\"auto\" unmountOnExit>\n\t\t\t\t\t\t\t<Box my={2}>\n\t\t\t\t\t\t\t\t<Grid container>\n\t\t\t\t\t\t\t\t\t<Grid item xs={12} sm={3} md={2}>\n\t\t\t\t\t\t\t\t\t\t<FormControl style={{ width: '100%' }}>\n\t\t\t\t\t\t\t\t\t\t\t<InputLabel id=\"registros-filter-type\">Tipo</InputLabel>\n\t\t\t\t\t\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\t\t\t\t\t\tlabelId=\"registros-filter-type\"\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"registros-filter-type-select\"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={countFilters.type || 'all'}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\tname='type'\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value='all'><em>Todos</em></MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value='gedure'>Gedure</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value='session'>Sesión</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem value='user'>Usuario</MenuItem>\n\t\t\t\t\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Collapse>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<TableRegistros \n\t\t\t\t\t\t\ttableRef={tableRef}\n\t\t\t\t\t\t\tfilters={countFilters}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ShowRegistro />\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</Container>\n\t\t</main>\n\t);\n}"],"sourceRoot":""}
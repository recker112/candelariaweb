{"version":3,"sources":["views/noticias/PageShowNoticia.js","actions/updateForms.js"],"names":["useStyles","makeStyles","theme","containerMain","flexGrow","marginBottom","spacing","breakpoints","up","marginTop","Noticia","props","user","title","content","extracto","fecha_humano","url_imgs","fecha_humano_modify","slug","useTheme","Options","useSelector","state","auth","userData","useState","anchorEl","setAnchorEl","history","useHistory","Fragment","onClick","event","currentTarget","id","keepMounted","open","Boolean","onClose","push","style","backgroundColor","palette","primary","main","avatar","nombre","arrow","aria-label","src","secondary","substring","toUpperCase","action","subheader","dangerouslySetInnerHTML","__html","align","PageShowNoticia","useParams","cancelAxios","window","axios","CancelToken","source","data","forms","noticia","loading","dispatch","useDispatch","classes","fetchData","useFetch","useEffect","a","url","prepare","type","messageToFinish","cancelToken","token","response","updateForms","consult","cancel","className","ref","document","maxWidth","container","justify","form","status","payload"],"mappings":"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","file":"static/js/17.836943b7.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\n\nimport { useParams, useHistory } from 'react-router-dom';\n\nimport { \n\tContainer,\n\tIconButton,\n\tCard,\n\tCardHeader,\n\tCardContent,\n\tCardActions,\n\tTooltip,\n\tAvatar,\n\tTypography,\n\tCircularProgress,\n\tGrid,\n\tMenu,\n\tMenuItem,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\n\nimport { useTheme } from '@material-ui/core/styles';\n\nimport useFetch from '../../hooks/useFetch';\n\n// Components\nimport FooterText from '../../components/FooterText';\n\n// Redux\nimport { useSelector, useDispatch } from 'react-redux';\nimport updateForms from '../../actions/updateForms';\n\nconst useStyles = makeStyles((theme) => ({\n\tcontainerMain: {\n\t\tflexGrow: 1,\n\t\tmarginBottom: theme.spacing(6),\n\t\t[theme.breakpoints.up('xs')]: {\n\t\t\tmarginTop: '48px',\n\t\t},\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\tmarginTop: theme.spacing(8),\n\t\t},\n\t},\n}));\n\nexport function Noticia(props) {\n\tconst {\n\t\tuser,\n\t\ttitle,\n\t\textracto,\n\t\tcontent,\n\t\tfecha_humano,\n\t\turl_imgs,\n\t\tfecha_humano_modify,\n\t\tslug,\n\t} = props;\n\n\tfunction createMarkup() {\n\t\treturn { __html: content};\n\t}\n\n\tconst theme = useTheme();\n\t\n\tconst { auth } = useSelector((state) => ({\n\t\tauth: state.userData.auth,\n\t}));\n\t\n\tconst Options = () => {\n\t\tconst [anchorEl, setAnchorEl] = useState(null);\n\t\t\n\t\tconst history = useHistory();\n\t\t\n\t\tconst handleClick = (event) => {\n\t\t\tsetAnchorEl(event.currentTarget);\n\t\t};\n\t\t\n\t\tconst handleClose = () => {\n\t\t\tsetAnchorEl(null);\n\t\t};\n\n\t\tconst handleReturn = () => {\n\t\t\thistory.push(\"/noticias\");\n\t\t}\n\t\t\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<IconButton onClick={handleClick}>\n\t\t\t\t\t<MoreVertIcon />\n\t\t\t\t</IconButton>\n\t\t\t\t<Menu\n\t\t\t\t\tid=\"menu-options\"\n\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\tkeepMounted\n\t\t\t\t\topen={Boolean(anchorEl)}\n\t\t\t\t\tonClose={handleClose}\n\t\t\t\t>\n\t\t\t\t\t<MenuItem onClick={handleReturn}>Regresar</MenuItem>\n\t\t\t\t</Menu>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Card>\n\t\t\t<CardHeader\n\t\t\t\tstyle={{ backgroundColor: theme.palette.primary.main }}\n\t\t\t\tavatar={\n\t\t\t\t\t<Tooltip title={user.nombre} arrow>\n\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\taria-label=\"skeleton\"\n\t\t\t\t\t\t\tsrc={user.avatar}\n\t\t\t\t\t\t\tstyle={{ backgroundColor: theme.palette.secondary.main }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{user.nombre.substring(0, 1).toUpperCase()}\n\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t}\n\t\t\t\taction={\n\t\t\t\t\t<Options />\n\t\t\t\t}\n\t\t\t\ttitle={title}\n\t\t\t\tsubheader={`Publicado por ${user.nombre} ${fecha_humano}`}\n\t\t\t/>\n\t\t\t<CardContent>\n\t\t\t\t<Typography dangerouslySetInnerHTML={createMarkup()} align=\"justify\"></Typography>\n\t\t\t</CardContent>\n\t\t</Card>\n\t);\n}\n\nfunction PageShowNoticia() {\n\tlet { slug } = useParams();\n\tlet cancelAxios = window.axios.CancelToken.source();\n\t\n\tconst { loading, data, auth } = useSelector((state) => ({\n\t\tdata: state.forms.noticia.data,\n\t\tloading: state.forms.noticia.loading,\n\t\tauth: state.userData.auth,\n\t}));\n\tconst dispatch = useDispatch();\n\t\n\tconst classes = useStyles();\n\t\n\tconst { fetchData } = useFetch();\n\t\n\tuseEffect(()=>{\n\t\tconst consult = async () => {\n\t\t\tlet url;\n\n\t\t\tif (auth) {\n\t\t\t\turl = `v1/posts/auth/${slug}`;\n\t\t\t}else {\n\t\t\t\turl = `v1/posts/${slug}`;\n\t\t\t}\n\n\t\t\tconst prepare = {\n\t\t\t\turl: url,\n\t\t\t\ttype: 'get',\n\t\t\t\tmessageToFinish: false,\n\t\t\t\tdata: {\n\t\t\t\t\tcancelToken: cancelAxios.token,\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst response = await fetchData(prepare);\n\n\t\t\tif (response) {\n\t\t\t\tdispatch(updateForms('noticia', false, response));\n\t\t\t}else {\n\t\t\t\tdispatch(updateForms('noticia', false));\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (loading) {\n\t\t\tconsult();\n\t\t}\n\t\t\n\t\t// eslint-disable-next-line\n\t}, [loading]);\n\t\n\t//Unmount\n\tuseEffect(()=>{\n\t\treturn () => {\n\t\t\tif (cancelAxios) {\n\t\t\t\tcancelAxios.cancel();\n\t\t\t}\n\t\t\tdispatch(updateForms('noticia', true, {}));\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, []);\n\t\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<main className={classes.containerMain}ref={()=>{\n\t\t\t\tdocument.title = `La Candelaria - ${data.title || ''}`;\n\t\t\t}}>\n\t\t\t\t<Container maxWidth='md' className='container--margin'>\n\t\t\t\t\t{data?.slug && (\n\t\t\t\t\t\t<Noticia {...data} />\n\t\t\t\t\t)}\n\t\t\t\t\t{loading && (\n\t\t\t\t\t\t<Grid container justify='center'>\n\t\t\t\t\t\t\t<CircularProgress />\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t)}\n\t\t\t\t</Container>\n\t\t\t</main>\n\t\t\t{!auth && (\n\t\t\t\t<footer className='footer'>\n\t\t\t\t\t<FooterText />\n\t\t\t\t</footer>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nexport default PageShowNoticia;","const updateForms = (form, loading, data = null, status = null) => {\n  return {\n    type: `UPDATE_FORM_DATA`,\n    payload: {form, loading, data, status}\n  }\n}\n\nexport default updateForms;"],"sourceRoot":""}
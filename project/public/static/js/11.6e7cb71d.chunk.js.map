{"version":3,"sources":["components/FooterText.js","actions/updateForms.js","views/noticias/PageShowNoticia.js"],"names":["FooterText","rest","textAlign","updateForms","form","loading","data","status","type","payload","useStyles","makeStyles","theme","containerMain","flexGrow","marginBottom","spacing","breakpoints","up","marginTop","Noticia","props","user","title","content","extracto","fecha_humano","url_imgs","fecha_humano_modify","slug","useTheme","Options","useSelector","state","auth","userData","useState","anchorEl","setAnchorEl","history","useHistory","Fragment","onClick","event","currentTarget","id","keepMounted","open","Boolean","onClose","push","style","backgroundColor","palette","primary","main","avatar","nombre","arrow","aria-label","src","secondary","substring","toUpperCase","action","subheader","dangerouslySetInnerHTML","__html","align","PageShowNoticia","useParams","cancelAxios","window","axios","CancelToken","source","forms","noticia","dispatch","useDispatch","classes","fetchData","useFetch","useEffect","a","url","prepare","messageToFinish","cancelToken","token","response","consult","cancel","className","ref","document","maxWidth","container","justify"],"mappings":"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","file":"static/js/11.6e7cb71d.chunk.js","sourcesContent":["import React from 'react';\n\nimport { Box } from '@material-ui/core';\n\nfunction FooterText({ ...rest }) {\n\treturn (\n\t\t<Box {...rest} textAlign='center'>\n\t\t\t&copy; U.E.P A.P.E.P \"La Candelaria\" | 2020\n\t\t\t<br/>\n\t\t\tDesarrollado por Recker\n\t\t\t<br/>\n\t\t\tPowered by Gedure\n\t\t</Box>\n\t)\n}\n\nexport default FooterText;","const updateForms = (form, loading, data = null, status = null) => {\n  return {\n    type: `UPDATE_FORM_DATA`,\n    payload: {form, loading, data, status}\n  }\n}\n\nexport default updateForms;","import React, { useEffect, useState } from 'react';\n\nimport { useParams, useHistory } from 'react-router-dom';\n\nimport { \n\tContainer,\n\tIconButton,\n\tCard,\n\tCardHeader,\n\tCardContent,\n\tCardActions,\n\tTooltip,\n\tAvatar,\n\tTypography,\n\tCircularProgress,\n\tGrid,\n\tMenu,\n\tMenuItem,\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\n\nimport { useTheme } from '@material-ui/core/styles';\n\nimport useFetch from '../../hooks/useFetch';\n\n// Components\nimport FooterText from '../../components/FooterText';\n\n// Redux\nimport { useSelector, useDispatch } from 'react-redux';\nimport updateForms from '../../actions/updateForms';\n\nconst useStyles = makeStyles((theme) => ({\n\tcontainerMain: {\n\t\tflexGrow: 1,\n\t\tmarginBottom: theme.spacing(8),\n\t\t[theme.breakpoints.up('xs')]: {\n\t\t\tmarginTop: '48px',\n\t\t},\n\t\t[theme.breakpoints.up('sm')]: {\n\t\t\tmarginTop: theme.spacing(8),\n\t\t},\n\t},\n}));\n\nexport function Noticia(props) {\n\tconst {\n\t\tuser,\n\t\ttitle,\n\t\textracto,\n\t\tcontent,\n\t\tfecha_humano,\n\t\turl_imgs,\n\t\tfecha_humano_modify,\n\t\tslug,\n\t} = props;\n\n\tfunction createMarkup() {\n\t\treturn { __html: content};\n\t}\n\n\tconst theme = useTheme();\n\t\n\tconst { auth } = useSelector((state) => ({\n\t\tauth: state.userData.auth,\n\t}));\n\t\n\tconst Options = () => {\n\t\tconst [anchorEl, setAnchorEl] = useState(null);\n\t\t\n\t\tconst history = useHistory();\n\t\t\n\t\tconst handleClick = (event) => {\n\t\t\tsetAnchorEl(event.currentTarget);\n\t\t};\n\t\t\n\t\tconst handleClose = () => {\n\t\t\tsetAnchorEl(null);\n\t\t};\n\n\t\tconst handleReturn = () => {\n\t\t\thistory.push(\"/noticias\");\n\t\t}\n\t\t\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<IconButton onClick={handleClick}>\n\t\t\t\t\t<MoreVertIcon />\n\t\t\t\t</IconButton>\n\t\t\t\t<Menu\n\t\t\t\t\tid=\"menu-options\"\n\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\tkeepMounted\n\t\t\t\t\topen={Boolean(anchorEl)}\n\t\t\t\t\tonClose={handleClose}\n\t\t\t\t>\n\t\t\t\t\t<MenuItem onClick={handleReturn}>Regresar</MenuItem>\n\t\t\t\t</Menu>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Card>\n\t\t\t<CardHeader\n\t\t\t\tstyle={{ backgroundColor: theme.palette.primary.main }}\n\t\t\t\tavatar={\n\t\t\t\t\t<Tooltip title={user.nombre} arrow>\n\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\taria-label=\"skeleton\"\n\t\t\t\t\t\t\tsrc={user.avatar}\n\t\t\t\t\t\t\tstyle={{ backgroundColor: theme.palette.secondary.main }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{user.nombre.substring(0, 1).toUpperCase()}\n\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t}\n\t\t\t\taction={\n\t\t\t\t\t<Options />\n\t\t\t\t}\n\t\t\t\ttitle={title}\n\t\t\t\tsubheader={`Publicado por ${user.nombre} ${fecha_humano}`}\n\t\t\t/>\n\t\t\t<CardContent>\n\t\t\t\t<Typography dangerouslySetInnerHTML={createMarkup()} align=\"justify\"></Typography>\n\t\t\t</CardContent>\n\t\t</Card>\n\t);\n}\n\nfunction PageShowNoticia() {\n\tlet { slug } = useParams();\n\tlet cancelAxios = window.axios.CancelToken.source();\n\t\n\tconst { loading, data, auth } = useSelector((state) => ({\n\t\tdata: state.forms.noticia.data,\n\t\tloading: state.forms.noticia.loading,\n\t\tauth: state.userData.auth,\n\t}));\n\tconst dispatch = useDispatch();\n\t\n\tconst classes = useStyles();\n\t\n\tconst { fetchData } = useFetch();\n\t\n\tuseEffect(()=>{\n\t\tconst consult = async () => {\n\t\t\tlet url;\n\n\t\t\tif (auth) {\n\t\t\t\turl = `v1/posts/auth/${slug}`;\n\t\t\t}else {\n\t\t\t\turl = `v1/posts/${slug}`;\n\t\t\t}\n\n\t\t\tconst prepare = {\n\t\t\t\turl: url,\n\t\t\t\ttype: 'get',\n\t\t\t\tmessageToFinish: false,\n\t\t\t\tdata: {\n\t\t\t\t\tcancelToken: cancelAxios.token,\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst response = await fetchData(prepare);\n\n\t\t\tif (response) {\n\t\t\t\tdispatch(updateForms('noticia', false, response));\n\t\t\t}else {\n\t\t\t\tdispatch(updateForms('noticia', false));\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (loading) {\n\t\t\tconsult();\n\t\t}\n\t\t\n\t\t// eslint-disable-next-line\n\t}, [loading]);\n\t\n\t//Unmount\n\tuseEffect(()=>{\n\t\treturn () => {\n\t\t\tif (cancelAxios) {\n\t\t\t\tcancelAxios.cancel();\n\t\t\t}\n\t\t\tdispatch(updateForms('noticia', true));\n\t\t}\n\t\t// eslint-disable-next-line\n\t}, []);\n\t\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<main className={classes.containerMain}ref={()=>{\n\t\t\t\tdocument.title = `La Candelaria - ${data.title || ''}`;\n\t\t\t}}>\n\t\t\t\t<Container maxWidth='md' className='container--margin'>\n\t\t\t\t\t{data?.slug && (\n\t\t\t\t\t\t<Noticia {...data} />\n\t\t\t\t\t)}\n\t\t\t\t\t{loading && (\n\t\t\t\t\t\t<Grid container justify='center'>\n\t\t\t\t\t\t\t<CircularProgress />\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t)}\n\t\t\t\t</Container>\n\t\t\t</main>\n\t\t\t{!auth && (\n\t\t\t\t<footer className='footer'>\n\t\t\t\t\t<FooterText />\n\t\t\t\t</footer>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nexport default PageShowNoticia;"],"sourceRoot":""}
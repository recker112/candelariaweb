(this.webpackJsonpGedure=this.webpackJsonpGedure||[]).push([[42],{6123:function(e,a,t){"use strict";a.a=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"UPDATE_FORM_DATA",payload:{form:e,loading:a,data:t}}}},6124:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(6157),c=t(6178),l=t(57),i=t(6040),s=t(6038),u=t(108),d=Object(u.a)((function(e){return{progressLabel:{marginTop:5}}}));a.a=function(e){var a=e.loading,t=e.backDrop,n=void 0!==t&&t,u=e.children,m=function(e){var a=e.color,t=void 0===a?"primary":a,n=e.progressLabel,s=e.progressLoading,u=e.progress,m=d();return s&&u<=99?r.a.createElement(o.a,null,r.a.createElement(o.a,{position:"relative",display:"inline-flex"},r.a.createElement(c.a,{color:t,variant:"static",value:u}),r.a.createElement(o.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},r.a.createElement(l.a,{variant:"caption",component:"div",color:"textSecondary"},u,"%"))),n&&r.a.createElement(i.a,{container:!0,justify:"center"},r.a.createElement("span",{className:m.progressLabel},n))):r.a.createElement(c.a,{color:t})};return a&&!n?r.a.createElement(m,e):a&&n?r.a.createElement(s.a,{open:!0,style:{zIndex:200}},r.a.createElement(m,e)):u}},6164:function(e,a,t){"use strict";a.a=function(e,a,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{type:"UPDATE_DIALOGS_DATA",payload:{dialog:e,open:a,loading:t,data:n}}}},6219:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=t(150),c=r.a.forwardRef((function(e,a){return r.a.createElement(o.a,Object.assign({direction:"up",ref:a},e))}));a.a=c},6355:function(e,a,t){"use strict";t.d(a,"a",(function(){return f}));var n=t(0),r=t.n(n),o=t(6620),c=t(6511),l=t(6621),i=t(6441),s=t(6622),u=t(6200),d=t(6219),m=t(13),p=t(6164);function f(e){var a=e.callback,t=e.children,n=Object(m.d)((function(e){return{open:e.dialogs.deleteConfirmation.open,loading:e.dialogs.deleteConfirmation.loading}})),f=n.open,b=n.loading,g=Object(m.c)(),E=function(){g(Object(p.a)("deleteConfirmation",!1,!1))};return r.a.createElement(o.a,{open:f,TransitionComponent:d.a,"aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-description"},r.a.createElement(c.a,{id:"confirm-dialog-title"},"\xbfSeguro?"),r.a.createElement(l.a,null,r.a.createElement(i.a,{id:"confirm-dialog-description"},t)),r.a.createElement(s.a,null,r.a.createElement(u.a,{disabled:b,onClick:E},"Cancelar"),r.a.createElement(u.a,{disabled:b,onClick:function(){g(Object(p.a)("deleteConfirmation",!0,!0)),a(E)}},"Confirmar")))}},6474:function(e,a,t){"use strict";function n(e){if("string"===typeof e){var a=e.substring(1,2),t=e.substring(0,1);return"".concat(t,"G"===a?" grado":" a\xf1o")}}t.d(a,"a",(function(){return n}))},6653:function(e,a,t){"use strict";a.a=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"archivo",t=window.URL.createObjectURL(new Blob([e])),n=document.createElement("a");n.href=t,n.setAttribute("download",a),document.body.appendChild(n),n.click()}},7047:function(e,a,t){"use strict";t.r(a);var n=t(46),r=t.n(n),o=t(63),c=t(34),l=t(41),i=t(0),s=t.n(i),u=t(11),d=t(6092),m=t(6157),p=t(6178),f=t(6040),b=t(108),g=t(99),E=t(76),h=t(6075),v=t(6071),j=t(6509),O=t.n(j),y=t(6321),w=t.n(y),C=t(26),x=t(6474),B=t(6653),k=t(13),_=t(6164);function S(e){var a,t,n,l=e.id,u=e.lapso,d=e.fecha_humano,p=e.fecha_humano_modify,b=e.curso_boleta,j=e.created_at,y=e.updated_at,S=e.handleRefresh,D=Object(k.d)((function(e){return{permissions:e.userData.permissions}})).permissions,T=Object(k.c)(),z=Object(g.a)().fetchData,L=["#2f80ED","#0F3F6A","#219653","#f2994A","#9B51E0","#EB5757","#333333"],A=Object(i.useState)((n=L.length-1,Math.floor(Math.random()*Math.floor(n)))),R=Object(c.a)(A,1)[0],F=function(){var e=Object(o.a)(r.a.mark((function e(){var a,t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={url:"v1/download/boleta/".concat(l),type:"get",messageToFinish:!1,data:{responseType:"blob"}},e.next=3,z(a);case 3:(t=e.sent)?Object(B.a)(t,"Boleta_".concat(b.curso,"_").concat(b.seccion,"_").concat(u,"_lapso.pdf")):S();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(f.a,{item:!0,xs:12,sm:6,md:4},s.a.createElement(E.a,{elevation:0,className:"paper--padding"},s.a.createElement(m.a,{display:"flex"},s.a.createElement(m.a,{mr:1,component:"span"},s.a.createElement(C.d,{style:{fontSize:60,color:L[R]}})),s.a.createElement(m.a,{component:"span",style:{color:L[R]},fontSize:"h6.fontSize",fontWeight:600},Object(x.a)(b.curso)," ",b.seccion," - ",u,"\xb0 Lapso",s.a.createElement(m.a,{fontSize:"body1.fontSize",color:"text.disabled",fontWeight:600},j===y?"Subido ".concat(d):"Modificado ".concat(p)))),s.a.createElement(m.a,{align:"right"},s.a.createElement(h.a,{title:"Eliminar",arrow:!0},s.a.createElement(v.a,{onClick:function(){var e={id:l,lapso:u,curso:Object(x.a)(b.curso),seccion:b.seccion};T(Object(_.a)("deleteConfirmation",!0,!1,e))},component:"span",disabled:!(null===D||void 0===D||null===(a=D.administrar)||void 0===a?void 0:a.boletas_destroy)},s.a.createElement(w.a,null))),s.a.createElement(h.a,{title:"Reemplazar",arrow:!0},s.a.createElement(v.a,{onClick:function(){var e={id:l,lapso:u,curso:Object(x.a)(b.curso),seccion:b.seccion};T(Object(_.a)("replaceBoleta",!0,!1,e))},component:"span",disabled:!(null===D||void 0===D||null===(t=D.administrar)||void 0===t?void 0:t.boletas_edit)},s.a.createElement(C.e,null))),s.a.createElement(h.a,{title:"Descargar",arrow:!0},s.a.createElement(v.a,{onClick:F,component:"span"},s.a.createElement(O.a,null))))))}var D=t(6355),T=t(6620),z=t(6511),L=t(6621),A=t(6441),R=t(6200),F=t(57),M=t(6622),U=t(6122),G=t(6219),N=t(6124);function I(e){var a=e.handleRefresh,t=e.name,n=Object(i.useState)(0),l=Object(c.a)(n,2),u=l[0],d=l[1],p=Object(k.d)((function(e){return{open:e.dialogs.replaceBoleta.open,loading:e.dialogs.replaceBoleta.loading,data:e.dialogs.replaceBoleta.data}})),b=p.open,E=p.loading,h=p.data,v=Object(k.c)(),j=Object(U.c)(),O=j.handleSubmit,y=j.register,w=j.errors,C=Object(g.a)().fetchData,x=function(){E||v(Object(_.a)("replaceBoleta",!1,!1))},B=Object(i.useCallback)((function(e){var a=Math.round(100*e.loaded/e.total);d(a)}),[]),S=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(Object(_.a)("replaceBoleta",!0,!0)),(n=new FormData).append("boleta",t.boleta[0]),n.append("_method","PUT"),o={url:"v1/boleta/".concat(h.id),type:"post",data:n,otherData:{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:B}},e.next=7,C(o);case 7:e.sent?(v(Object(_.a)("replaceBoleta",!1,!1)),a()):v(Object(_.a)("replaceBoleta",!0,!1)),d(0);case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return s.a.createElement(T.a,{open:b,onClose:x,TransitionComponent:G.a},s.a.createElement(z.a,null,"\xbfSeguro?"),s.a.createElement(L.a,null,s.a.createElement(f.a,{container:!0,spacing:2},s.a.createElement(f.a,{item:!0,xs:12},s.a.createElement(A.a,null,"Est\xe1\u0e01 a punto de reemplazar la boleta ",s.a.createElement("strong",null,h.curso," ",h.seccion," ",h.lapso,"\xb0 Lapso")," de ",s.a.createElement("strong",null,t),". Tenga en cuenta que al reemplazar la boleta se borrar\xe1 la anterior.")),s.a.createElement(f.a,{container:!0,alignItems:"center",item:!0,xs:12},s.a.createElement("input",{id:"boleta-upload-file",ref:y({required:{value:!0,message:"* Debe subir un archivo"}}),defaultValue:null,style:{display:"none"},accept:"application/pdf",name:"boleta",type:"file"}),s.a.createElement("label",{htmlFor:"boleta-upload-file"},s.a.createElement(R.a,{variant:"contained",color:"secondary",component:"span"},"Cargar archivo")),Boolean(w.boleta)&&s.a.createElement(m.a,{ml:2,color:"#f44336"},s.a.createElement(F.a,null,w.boleta.message))))),s.a.createElement(M.a,null,s.a.createElement(R.a,{onClick:x,disabled:E},"Cancelar"),s.a.createElement(N.a,{loading:E,progressLoading:!0,progress:u,color:"inherit"},s.a.createElement(R.a,{onClick:O(S)},"Cambiar"))))}var P=t(6123);t.d(a,"default",(function(){return J}));var q=Object(b.a)((function(e){var a;return{containerMain:(a={flexGrow:1,paddingBottom:e.spacing(5)},Object(l.a)(a,e.breakpoints.up("xs"),{marginTop:"80px"}),Object(l.a)(a,e.breakpoints.up("sm"),{marginTop:e.spacing(12)}),a)}}));function J(){document.title="La Candelaria - Boletas";var e=Object(u.i)().id,a=Object(i.useState)(""),t=Object(c.a)(a,2),n=t[0],l=t[1],b=Object(k.d)((function(e){return{loading:e.forms.showBoletas.loading,data:e.forms.showBoletas.data,dataDelete:e.dialogs.deleteConfirmation.data}})),E=b.loading,h=b.data,v=b.dataDelete,j=Object(k.c)(),O=q(),y=Object(g.a)().fetchData,w=function(){var a=Object(o.a)(r.a.mark((function a(){var t,n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return j(Object(P.a)("showBoletas",!0)),t={url:"v1/boleta/".concat(e),type:"get",messageToFinish:!1},a.next=4,y(t);case 4:(n=a.sent)?(j(Object(P.a)("showBoletas",!1,n.boletas)),l(n.user.name)):j(Object(P.a)("showBoletas",!1,[]));case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();Object(i.useEffect)((function(){return w(),function(){j(Object(P.a)("showBoletas",!1,[]))}}),[]);var C=function(){var e=Object(o.a)(r.a.mark((function e(a){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:"v1/boleta/".concat(v.id),type:"delete",message404:"El usuario ya no existe"},e.next=3,y(t);case 3:n=e.sent,j(Object(_.a)("deleteConfirmation",!1,!1)),n&&w(),a(),w();case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return s.a.createElement("main",{className:O.containerMain},s.a.createElement(d.a,null,E&&s.a.createElement(m.a,{align:"center"},s.a.createElement(p.a,null)),!E&&h.length?s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,{fontSize:"h4.fontSize",mb:3,className:"text__bold--big"},"Boletas subidas de ",n),s.a.createElement(f.a,{container:!0,spacing:2},h.map((function(e,a){return s.a.createElement(S,Object.assign({key:a},e,{handleRefresh:w}))})))):null,!E&&!h.length&&s.a.createElement(m.a,{align:"center",fontSize:"body1.fontSize"},"No hay boletas cargadas para este estudiante."),s.a.createElement(D.a,{callback:C},"Est\xe1\u0e01 a punto de eliminar la boleta ",s.a.createElement("strong",null,v.curso," ",v.seccion," ",v.lapso,"\xb0 Lapso")," de ",s.a.createElement("strong",null,n),". Tenga en cuenta que esta acci\xf3n no se puede deshacer."),s.a.createElement(I,{handleRefresh:w,name:n})))}}}]);
//# sourceMappingURL=42.320d039e.chunk.js.map